(this["webpackJsonp@project-serum/swap-ui-example"]=this["webpackJsonp@project-serum/swap-ui-example"]||[]).push([[0],{221:function(e){e.exports=JSON.parse('{"name":"QS Tokens","description":"QS Tokens List for the various networks","logoURI":"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/solana/info/logo.png","keywords":["solana","spl"],"tags":{"hangzhounet":{"name":"hangzhounet","description":"Tokens that are fixed to an external asset, e.g. the US dollar"},"FA12":{"name":"FA12","description":"This is an FA12 Token"},"FA2":{"name":"FA2","description":"This is an FA2 Token"}},"timestamp":"2021-03-03T19:57:21+0000","tokens":[{"chainId":101,"address":"tez","symbol":"TEZ","name":"Tezos","decimals":6,"logoURI":"ipfs://Qmf3brydfr8c6CKGUUu73Dd7wfBw66Zbzof5E1BWGeU222","tags":["hangzhounet","FA12"],"extensions":{"website":"https://solatoken.net/","telegram":"https://t.me/solatokennet","twitter":"https://twitter.com/EcoSolana"}},{"chainId":101,"address":"KT1VowcKqZFGhdcDZA3UN1vrjBLmxV5bxgfJ","symbol":"QUIPU","name":"Quipuswap Governance Token","decimals":6,"logoURI":"ipfs://QmcSH2iaipU1kqcQfZhV5b2CL6Rm8Q8agRwdk1xq38Y3sP","tags":["hangzhounet","FA2"],"extensions":{"website":"https://solatoken.net/","telegram":"https://t.me/solatokennet","twitter":"https://twitter.com/EcoSolana"}},{"chainId":101,"address":"KT1Dr8Qf9at75uEvwN4QnGTNFfPMAr8KL4kK","symbol":"FA12","name":"FA12 Token","decimals":6,"logoURI":"ipfs://QmcSH2iaipU1kqcQfZhV5b2CL6Rm8Q8agRwdk1xq38Y3sP","tags":["hangzhounet","FA12"],"extensions":{"website":"https://solatoken.net/","telegram":"https://t.me/solatokennet","twitter":"https://twitter.com/EcoSolana"}},{"chainId":101,"address":"KT1P4m4Px5WzEnsoz9Ab22rfbcjfjegUoapA","symbol":"FA1218","name":"FA12 18 Decimals Token","decimals":18,"logoURI":"https://upload.wikimedia.org/wikipedia/commons/d/dd/S_logo.svg","tags":["hangzhounet","FA12"],"extensions":{"website":"https://solatoken.net/","telegram":"https://t.me/solatokennet","twitter":"https://twitter.com/EcoSolana"}},{"chainId":101,"address":"KT1CaWSNEnU6RR9ZMSSgD5tQtQDqdpw4sG83","symbol":"TS","name":"TypeScript Token","decimals":18,"logoURI":"https://upload.wikimedia.org/wikipedia/commons/4/4c/Typescript_logo_2020.svg","tags":["hangzhounet","FA2"],"extensions":{"website":"https://solatoken.net/","telegram":"https://t.me/solatokennet","twitter":"https://twitter.com/EcoSolana"}},{"chainId":101,"address":"KT1QGgr6k1CDf4Svd18MtKNQukboz8JzRPd5","symbol":"RCT","name":"React Token","decimals":8,"logoURI":"https://upload.wikimedia.org/wikipedia/commons/a/a7/React-icon.svg","tags":["hangzhounet","FA2"],"extensions":{"website":"https://solatoken.net/","telegram":"https://t.me/solatokennet","twitter":"https://twitter.com/EcoSolana"}},{"chainId":101,"address":"KT1FGZHSZJD5BKeW4S8ZibAnL2tJtuLACd4N","symbol":"ANG","name":"Angular Token","decimals":6,"logoURI":"https://upload.wikimedia.org/wikipedia/commons/c/cf/Angular_full_color_logo.svg","tags":["hangzhounet","FA2"],"extensions":{"website":"https://solatoken.net/","telegram":"https://t.me/solatokennet","twitter":"https://twitter.com/EcoSolana"}},{"chainId":101,"address":"KT1SaouedthKUtAujiBD232mZYGtKwpZ6mFD","symbol":"TKR","name":"Tinker","decimals":6,"logoURI":"https://www.clipartmax.com/png/middle/143-1437191_tinkerbell-by-prove-design-tinkerbell-by-prove-design-tinker-dota-2-png.png","tags":["hangzhounet","FA2"],"extensions":{"website":"https://solatoken.net/","telegram":"https://t.me/solatokennet","twitter":"https://twitter.com/EcoSolana"}}],"version":{"major":0,"minor":2,"patch":2}}')},238:function(e,t,n){},244:function(e,t){},245:function(e,t){},272:function(e,t){},273:function(e,t){},311:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(27),i=n.n(o),c=(n(238),n(6)),s=n(7),u=n(116),l=n(51),d=n(19),p=n(20),b=n(1),f=n.n(b),m=n(3),v=n(11),j=(n(239),n(178)),h=n(348),g=n(365),x=n(374),w=n(38),O=n(218),k=n(4),y=n(223),S=n(220),A=n(222),T=n(373),C=n(35),M=n(62),K=n(30),P=new k.PublicKey("AjkPkq3nsyDe1yKcbyZT7N4aK4Evv9om9tzhQD3wsRC"),F=new k.PublicKey("9LzCMqDgTKYz9Drzqnpgee3SGa89up3a247ypMj2xrqM"),E=new k.PublicKey("9xQeWvG816bUx9EPjHmaT23yvVM2ZWbrrpZb9PusVFin"),N=(new k.PublicKey("SRMuApVNdxXokk5GT7XD5cUUgXMBCoAz2LHeuAoKWRt"),new k.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v")),I=new k.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"),R=new k.PublicKey("Ejmc1UB4EsES5oAaRN63SpoxMJidt3ZGBrqrZk49vjTZ"),B=new k.PublicKey("So11111111111111111111111111111111111111112"),q=new k.PublicKey("6a9wpsZpZGxGhFVSQBpcTNjNjytdbSA1iUw1A5KNDxPw"),z=new k.PublicKey("FVsXUnbhifqJ4LiXQEbpUtXVdB8T5ADLKqSs5t1oc54F"),L=new k.PublicKey("6nGMps9VfDjkKEwYjdSNqN1ToXkLae4VsN49fzBiDFBd"),D=new k.PublicKey("9w97GdWUYYaamGwdKMKZgGzPduZJkiFizq4rz5CPXRv2"),W=new k.PublicKey("4v6e6vNXAaEunrvbqkYnKwbaWfck8a2KVR4uRAVXxVwC"),U=n(67),G=n(5),_=a.a.createContext(null),V="wrapped-sollet",Q="wormhole",Z={chainId:101,address:R.toString(),name:"Native SOL",decimals:"9",symbol:"SOL",logoURI:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/solana/info/logo.png",tags:[],extensions:{website:"https://solana.com/",serumV3Usdc:"9wFFyRfZBsuAha4YcuxcXLKwMxJR43S7fPfQLusDBzvT",serumV3Usdt:"HWHvQhFmJB3NUcu1aihKmrKegfVxBEHzwVX6yZCKEsi1",coingeckoId:"solana",waterfallbot:"https://t.me/SOLwaterfall"}};function J(e){var t=Object(r.useMemo)((function(){var t=e.tokenList.filterByClusterSlug("mainnet-beta").getList();return t.push(Z),t}),[e.tokenList]),n=Object(r.useMemo)((function(){var e=new Map;return t.forEach((function(t){e.set(t.address,t)})),e}),[t]),a=Object(r.useMemo)((function(){var e=t.filter((function(e){var t,n;return(null===(t=e.extensions)||void 0===t?void 0:t.serumV3Usdt)||(null===(n=e.extensions)||void 0===n?void 0:n.serumV3Usdc)}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),e}),[t,n]),o=Object(r.useMemo)((function(){var e=t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(V)}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),[e,new Map(e.map((function(e){return[e.address,e]})))]}),[t]),i=Object(v.a)(o,2),c=i[0],s=i[1],u=Object(r.useMemo)((function(){var e=t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(Q)}));return e.sort((function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0})),[e,new Map(e.map((function(e){return[e.address,e]})))]}),[t]),l=Object(v.a)(u,2),d=l[0],p=l[1];return Object(G.jsx)(_.Provider,{value:{tokenMap:n,wormholeMap:p,solletMap:s,swappableTokens:a,swappableTokensWormhole:d,swappableTokensSollet:c},children:e.children})}function X(){var e=Object(r.useContext)(_);if(null===e)throw new Error("Context not available");return e}function Y(){return X().tokenMap}var H=n(16),$=n(52);function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(m.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(n=ue.get(t.toString()))){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,ae("GET","coins/sol/".concat(t.toString()));case 5:return r=e.sent,n=Object(H.a)(Object(H.a)({},r),{},{splMint:new k.PublicKey(r.splMint)}),ue.set(t.toString(),n),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t,n,r,a){return re.apply(this,arguments)}function re(){return(re=Object(m.a)(f.a.mark((function e(t,n,r,a,o){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(i=le.get(a.toString()))){e.next=3;break}return e.abrupt("return",i);case 3:return e.next=5,t.getAccountInfo(a);case 5:if(null!==e.sent){e.next=13;break}return le.set(a.toString(),!1),ae("POST","wormhole/pool/".concat(o.ticker,"/").concat(a.toString(),"/").concat(n.toString(),"/").concat(r.toString())).catch(console.error),e.abrupt("return",!1);case 13:return le.set(a.toString(),!0),e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e,t,n){return oe.apply(this,arguments)}function oe(){return(oe=Object(m.a)(f.a.mark((function e(t,n,r){var a,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={headers:a={},method:t},"GET"===t?o.cache="no-cache":r&&(a["Content-Type"]="application/json",o.body=JSON.stringify(r)),e.next=5,fetch("https://swap.sollet.io/api/".concat(n),o);case 5:return i=e.sent,e.next=8,ie(i);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(m.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if((n=e.sent).success){e.next=5;break}throw new se(n.error,t.status);case 5:return e.abrupt("return",n.result);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this,e)).name=void 0,a.status=void 0,a.name="SwapApiError",a.status=r,a}return n}(Object($.a)(Error)),ue=new Map,le=new Map,de=n(18),pe=n(42);function be(){return(be=Object(m.a)(f.a.mark((function e(t,n){var r,a,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ve(n),e.next=3,t.getProgramAccounts(K.TOKEN_PROGRAM_ID,{commitment:t.commitment,filters:r});case 3:return a=e.sent,o=a.map((function(e){var t=e.pubkey,n=e.account,r=n.data,a=n.executable,o=n.owner,i=n.lamports;return{publicKey:new k.PublicKey(t),accountInfo:{data:r,executable:a,owner:new k.PublicKey(o),lamports:i}}})).map((function(e){return{publicKey:e.publicKey,account:me(e.accountInfo.data)}})),e.next=7,Promise.all(o.map(function(){var e=Object(m.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.Token.getAssociatedTokenAddress(K.ASSOCIATED_TOKEN_PROGRAM_ID,K.TOKEN_PROGRAM_ID,t.account.mint,n);case 2:return r=e.sent,e.abrupt("return",[t,r]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 7:return e.abrupt("return",e.sent.filter((function(e){var t=Object(v.a)(e,2),n=t[0],r=t[1];return n.publicKey.equals(r)})).map((function(e){return Object(v.a)(e,1)[0]})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var fe=pe.struct([pe.blob(32,"mint"),pe.blob(32,"owner"),pe.nu64("amount"),pe.blob(93)]);function me(e){var t=fe.decode(e),n=t.mint,r=t.owner,a=t.amount;return{mint:new k.PublicKey(n),owner:new k.PublicKey(r),amount:new w.BN(a)}}function ve(e){return[{memcmp:{offset:fe.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:fe.span}]}var je=a.a.createContext(null);function he(e){var t=e.provider,n=Object(r.useState)(0),a=Object(v.a)(n,2)[1];return Object(r.useEffect)((function(){if(!t.wallet.publicKey)return Oe.length=0,void a((function(e){return e+1}));(function(e,t){return be.apply(this,arguments)})(t.connection,t.wallet.publicKey).then((function(e){e&&(Oe.push.apply(Oe,Object(de.a)(e)),a((function(e){return e+1})))})),t.connection.getAccountInfo(t.wallet.publicKey).then((function(e){e&&(Oe.push({publicKey:t.wallet.publicKey,account:{amount:new w.BN(e.lamports),mint:R}}),a((function(e){return e+1})))}))}),[t.wallet.publicKey,t.connection]),Object(G.jsx)(je.Provider,{value:{provider:t},children:e.children})}function ge(){var e=Object(r.useContext)(je);if(null===e)throw new Error("Context not available");return e}function xe(e){var t=ge().provider,n=Object(r.useState)(0),a=Object(v.a)(n,2)[1],o=Oe.filter((function(t){return e&&t.account.mint.equals(e)}));o.sort((function(e,t){return e.account.amount>t.account.amount?-1:e.account.amount<t.account.amount?1:0}));var i=o[0],c=null===e||void 0===e?void 0:e.equals(R);if(Object(r.useEffect)((function(){var e;return i&&c?e=t.connection.onAccountChange(t.wallet.publicKey,(function(e){var t={amount:new w.BN(e.lamports),mint:R};if(t.amount!==i.account.amount){var n=Oe.indexOf(i);C.ok(n>=0),Oe[n].account=t,a((function(e){return e+1}))}})):i&&(e=t.connection.onAccountChange(i.publicKey,(function(e){if(0!==e.data.length)try{var t=me(e.data);if(t.amount!==i.account.amount){var n=Oe.indexOf(i);C.ok(n>=0),Oe[n].account=t,a((function(e){return e+1}))}}catch(r){console.log("Failed to decode token AccountInfo")}}))),function(){e&&t.connection.removeAccountChangeListener(e)}}),[t.connection,i]),void 0!==e)return c||0!==o.length?i:null}function we(e){var t=ge().provider,n=Object(M.a)(Object(m.a)(f.a.mark((function n(){var r,a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!ke.get(e.toString())){n.next=4;break}return n.abrupt("return",ke.get(e.toString()));case 4:return r=new K.Token(t.connection,e,K.TOKEN_PROGRAM_ID,new k.Account),a=r.getMintInfo(),ke.set(e.toString(),a),n.abrupt("return",a);case 8:case"end":return n.stop()}}),n)}))),[t.connection,e]);if(n.result)return n.result}var Oe=[],ke=new Map([[R.toString(),{decimals:9}]]),ye=.9978,Se=a.a.createContext(null);function Ae(e){var t=Object(r.useState)(new Map),n=Object(v.a)(t,2),a=n[0],o=n[1],i=e.swapClient,c=function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map(a),(i=null===(n=r.get(t.market.toString()))||void 0===n?void 0:n.filter((function(e){return!e.address.equals(t.address)})))&&i.length>0?r.set(t.market.toString(),i):r.delete(t.market.toString()),o(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){i.program.provider.wallet.publicKey?U.OpenOrders.findForOwner(i.program.provider.connection,i.program.provider.wallet.publicKey,E).then(function(){var e=Object(m.a)(f.a.mark((function e(t){var n,r,a,c,s,u,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Map,r=new Set,t.forEach((function(e){r.add(e.market.toString()),n.get(e.market.toString())?n.get(e.market.toString()).push(e):n.set(e.market.toString(),[e])})),!(r.size>100)){e.next=5;break}throw new Error("Too many markets. Please file an issue to update this");case 5:return e.next=7,w.utils.rpc.getMultipleAccounts(i.program.provider.connection,Array.from(r.values()).map((function(e){return new k.PublicKey(e)})));case 7:if(a=e.sent,c=a.map((function(e){return{publicKey:null===e||void 0===e?void 0:e.publicKey,account:new U.Market(U.Market.getLayout(E).decode(null===e||void 0===e?void 0:e.account.data),-1,-1,i.program.provider.opts,E)}})),o(n),!((s=Array.from(new Set(c.map((function(e){return[e.account.baseMintAddress.toString(),e.account.quoteMintAddress.toString()]})).flat()).values()).map((function(e){return new k.PublicKey(e)}))).length>100)){e.next=13;break}throw new Error("Too many mints. Please file an issue to update this");case 13:return e.next=15,w.utils.rpc.getMultipleAccounts(i.program.provider.connection,s);case 15:u=e.sent,l=u.map((function(e){var t,n,r=K.MintLayout.decode(e.account.data);return t=e.publicKey,n=r,ke.set(t.toString(),new Promise((function(e){return e(n)}))),{publicKey:e.publicKey,mintInfo:r}})),c.forEach((function(e){var t=l.filter((function(t){return t.publicKey.equals(e.account.baseMintAddress)}))[0],n=l.filter((function(t){return t.publicKey.equals(e.account.quoteMintAddress)}))[0];C.ok(t&&n),e.account._baseSplTokenDecimals=t.mintInfo.decimals,e.account._quoteSplTokenDecimals=n.mintInfo.decimals,Ue.set(e.publicKey.toString(),new Promise((function(t){return t(e.account)})))}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):o(new Map)}),[i.program.provider.connection,i.program.provider.wallet.publicKey,i.program.provider.opts]),Object(G.jsx)(Se.Provider,{value:{openOrders:a,closeOpenOrders:c,swapClient:i},children:e.children})}function Te(){var e=Object(r.useContext)(Se);if(null===e)throw new Error("Context not available");return e}function Ce(){return Te().openOrders}function Me(e){var t=Te().swapClient,n=Object(M.a)(Object(m.a)(f.a.mark((function n(){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",void 0);case 2:if(!Ue.get(e.toString())){n.next=4;break}return n.abrupt("return",Ue.get(e.toString()));case 4:return r=new Promise(function(){var n=Object(m.a)(f.a.mark((function n(r){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U.Market.load(t.program.provider.connection,e,t.program.provider.opts,E);case 2:a=n.sent,r(a);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Ue.set(e.toString(),r),n.abrupt("return",r);case 7:case"end":return n.stop()}}),n)}))),[t.program.provider.connection,e]);if(n.result)return n.result}function Ke(e){var t=function(e){var t=Te().swapClient,n=Me(e),a=Object(r.useState)(0),o=Object(v.a)(a,2),i=o[0],c=o[1],s=Object(M.a)(Object(m.a)(f.a.mark((function r(){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e&&n){r.next=2;break}return r.abrupt("return",void 0);case 2:if(!We.get(e.toString())){r.next=4;break}return r.abrupt("return",We.get(e.toString()));case 4:return a=new Promise(function(){var e=Object(m.a)(f.a.mark((function e(r){var a,o,i,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.loadBids(t.program.provider.connection),n.loadAsks(t.program.provider.connection)]);case 2:a=e.sent,o=Object(v.a)(a,2),i=o[0],c=o[1],r({bids:i,asks:c});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),We.set(e.toString(),a),r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)}))),[i,t.program.provider.connection,e,n]);if(Object(r.useEffect)((function(){var e;return(null===n||void 0===n?void 0:n.bidsAddress)&&(e=t.program.provider.connection.onAccountChange(null===n||void 0===n?void 0:n.bidsAddress,function(){var e=Object(m.a)(f.a.mark((function e(t){var r,a,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=U.Orderbook.decode(n,t.data),e.next=3,We.get(n.address.toString());case 3:a=e.sent,o=null===a||void 0===a?void 0:a.bids.items(!0).next().value,i=r.items(!0).next().value,a&&o&&i&&o.price!==i.price&&(a.bids=r,c((function(e){return e+1})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),function(){e&&t.program.provider.connection.removeAccountChangeListener(e)}}),[n,null===n||void 0===n?void 0:n.bidsAddress,t.program.provider.connection]),Object(r.useEffect)((function(){var e;return(null===n||void 0===n?void 0:n.asksAddress)&&(e=t.program.provider.connection.onAccountChange(null===n||void 0===n?void 0:n.asksAddress,function(){var e=Object(m.a)(f.a.mark((function e(t){var r,a,o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=U.Orderbook.decode(n,t.data),e.next=3,We.get(n.address.toString());case 3:a=e.sent,o=null===a||void 0===a?void 0:a.asks.items(!1).next().value,i=r.items(!1).next().value,a&&o&&i&&o.price!==i.price&&(a.asks=r,c((function(e){return e+1})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),function(){e&&t.program.provider.connection.removeAccountChangeListener(e)}}),[n,null===n||void 0===n?void 0:n.bidsAddress,t.program.provider.connection]),s.result)return s.result}(e);if(void 0!==t){var n=t.bids.items(!0).next().value,a=t.asks.items(!1).next().value;if(!n&&!a)return{};if(!n)return{bestOffer:a.price};if(!a)return{bestBid:n.price};var o=(n.price+a.price)/2;return{bestBid:n.price,bestOffer:a.price,mid:o}}}function Pe(e,t){var n=Fe(e,t);return null===n?null:n.markets}function Fe(e,t){var n=Te().swapClient,r=X(),a=r.wormholeMap,o=r.solletMap,i=Object(M.a)(Object(m.a)(f.a.mark((function r(){var i,c,s,u,l;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ie(n.program.provider.connection,e,t,a,o);case 2:if(null===(i=r.sent)){r.next=6;break}return c=Object(v.a)(i,2),s=c[0],u=c[1],r.abrupt("return",{markets:[s],kind:u});case 6:if(null!==(l=n.route(e.equals(R)?B:e,t.equals(R)?B:t))){r.next=9;break}return r.abrupt("return",null);case 9:return"usdx",r.abrupt("return",{markets:l,kind:"usdx"});case 11:case"end":return r.stop()}}),r)}))),[e,t,n]);return i.result?i.result:null}var Ee=new Map([[Ne(z,N),L],[Ne(D,I),W]]);function Ne(e,t){var n=e<t?[e,t]:[t,e],r=Object(v.a)(n,2),a=r[0],o=r[1];return a.toString()+o.toString()}function Ie(e,t,n,r,a){return Re.apply(this,arguments)}function Re(){return(Re=Object(m.a)(f.a.mark((function e(t,n,r,a,o){var i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=Be(n,r))){e.next=3;break}return e.abrupt("return",[i,"wormhole-native"]);case 3:return e.next=5,qe(t,n,r,a,o);case 5:if(null!==(i=e.sent)){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",[i,"wormhole-sollet"]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){var n;return null!==(n=Ee.get(Ne(e,t)))&&void 0!==n?n:null}function qe(e,t,n,r,a){return ze.apply(this,arguments)}function ze(){return(ze=Object(m.a)(f.a.mark((function e(t,n,r,a,o){var i,c,s,u,l,d,p,b,m,j,h,g,x,w,O,k;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.get(n.toString()),c=void 0!==i,s=a.get(r.toString()),u=void 0!==s,l=o.get(n.toString()),d=void 0!==l,p=o.get(r.toString()),b=void 0!==p,!c&&!u||c===u){e.next=28;break}if(!d&&!b||d===b){e.next=28;break}return j=d?n:r,h=c?[n,i]:[r,s],g=Object(v.a)(h,2),x=g[0],w=g[1],e.next=14,ee(j);case 14:if((O=e.sent).erc20Contract===(null===(m=w.extensions)||void 0===m?void 0:m.address)){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,Le(j,x);case 19:if(null!==(k=e.sent)){e.next=22;break}return e.abrupt("return",null);case 22:return e.next=24,ne(t,j,x,k,O);case 24:if(e.sent){e.next=27;break}return e.abrupt("return",null);case 27:return e.abrupt("return",k);case 28:return e.abrupt("return",null);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e,t){return De.apply(this,arguments)}function De(){return(De=Object(m.a)(f.a.mark((function e(t,n){var r,a,o,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=i.length>2&&void 0!==i[2]?i[2]:0)>99)){e.next=4;break}return console.log("Swap market version cannot be greater than 99"),e.abrupt("return",null);case 4:if(!(r<0)){e.next=7;break}return console.log("Version cannot be less than zero"),e.abrupt("return",null);case 7:return a=function(e){return e<=99?"0".concat(e).slice(-2):e},o=t.toString().slice(0,15)+n.toString().slice(0,15)+a(r),e.next=11,k.PublicKey.createWithSeed(q,o,E);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var We=new Map,Ue=new Map,Ge=a.a.createContext(null);function _e(e){var t,n,a,o,i=Object(r.useState)(null!==(t=e.fromMint)&&void 0!==t?t:P),c=Object(v.a)(i,2),s=c[0],u=c[1],l=Object(r.useState)(null!==(n=e.toMint)&&void 0!==n?n:F),d=Object(v.a)(l,2),p=d[0],b=d[1],f=Object(r.useState)(null!==(a=e.fromAmount)&&void 0!==a?a:0),m=Object(v.a)(f,2),j=m[0],h=m[1],g=Object(r.useState)(null!==(o=e.toAmount)&&void 0!==o?o:0),x=Object(v.a)(g,2),w=x[0],O=x[1],k=Object(r.useState)(!1),y=Object(v.a)(k,2),S=y[0],A=y[1],T=Object(r.useState)(!1),M=Object(v.a)(T,2),K=M[0],E=M[1],N=Object(r.useState)(.5),I=Object(v.a)(N,2),R=I[0],B=I[1],q=Object(r.useState)(null),z=Object(v.a)(q,2),L=z[0],D=z[1],W=Ze(s,p,L),U=e.referral;C.ok(R>=0),Object(r.useEffect)((function(){W&&_(j)}),[W]);var _=function(e){if(void 0===W)return h(0),void O(0);h(e),O(ye*(e/W))};return Object(G.jsx)(Ge.Provider,{value:{fromMint:s,setFromMint:u,toMint:p,setToMint:b,fromAmount:j,setFromAmount:_,toAmount:w,setToAmount:function(e){if(void 0===W)return h(0),void O(0);O(e),h(e*W/ye)},swapToFromMints:function(){var e=s,t=p;h(w),u(t),b(e)},slippage:R,setSlippage:B,fairOverride:L,setFairOverride:D,isClosingNewAccounts:S,isStrict:K,setIsStrict:E,setIsClosingNewAccounts:A,referral:U},children:e.children})}function Ve(){var e=Object(r.useContext)(Ge);if(null===e)throw new Error("Context not available");return e}function Qe(){var e=Ve(),t=e.fairOverride;return Ze(e.fromMint,e.toMint,t)}function Ze(e,t,n){var r=function(e,t){var n=Pe(e,t),r=Ke(n?n[0]:void 0),a=Me(n?n[0]:void 0),o=Ke(n?n[1]:void 0);if(null!==n){if(1===n.length&&void 0!==r){if(void 0===a)return;return(null===a||void 0===a?void 0:a.baseMintAddress.equals(e))||(null===a||void 0===a?void 0:a.baseMintAddress.equals(B))&&e.equals(R)?r.bestBid&&1/r.bestBid:r.bestOffer&&r.bestOffer}if(void 0!==r&&void 0!==r.bestBid&&void 0!==o&&void 0!==o.bestOffer)return o.bestOffer/r.bestBid}}(e,t);return null===n?r:n}var Je=n(371),Xe=n(48),Ye=n(160),He=n(377),$e=n(372),et=n(378),tt=n(350),nt=n(354),rt=n(353),at=n(315),ot=n(349),it=Object(h.a)((function(e){return{dialogContent:{padding:0},textField:{marginBottom:"8px",color:"#fff"},tab:{minWidth:"134px"},tabSelected:{color:e.palette.grey[50],fontWeight:700,backgroundColor:e.palette.primary.main,borderRadius:"10px"},tabIndicator:{opacity:0},input:{color:"white !important"}}}));function ct(e){var t=e.open,n=e.onClose,a=e.setMint,o=Object(r.useState)(0),i=Object(v.a)(o,2),c=i[0],s=(i[1],Object(r.useState)("")),u=Object(v.a)(s,2),l=u[0],d=u[1],p=l.toLowerCase(),b=it(),f=function(){var e=X();return{swappableTokens:e.swappableTokens,swappableTokensWormhole:e.swappableTokensWormhole,swappableTokensSollet:e.swappableTokensSollet}}(),m=f.swappableTokens,j=f.swappableTokensSollet,h=f.swappableTokensWormhole,g=(Object(ot.a)("(max-width:450px)"),0===c?m:1===c?h:j),x=""===l?g:g.filter((function(e){return e.symbol.toLowerCase().startsWith(p)||e.name.toLowerCase().startsWith(p)||e.address.toLowerCase().startsWith(p)}));return Object(G.jsxs)(et.a,{open:t,onClose:n,scroll:"paper",PaperProps:{style:{borderRadius:"10px",background:"#22242a",color:"white !important",width:"420px"}},children:[Object(G.jsxs)(tt.a,{style:{fontWeight:"bold"},children:[Object(G.jsx)(Ye.a,{variant:"h6",style:{paddingBottom:"16px",color:"white"},children:"Select a token"}),Object(G.jsx)(He.a,{className:b.textField,InputProps:{classes:{input:b.input}},placeholder:"Search name",value:l,fullWidth:!0,variant:"outlined",onChange:function(e){return d(e.target.value)}})]}),Object(G.jsx)(nt.a,{className:b.dialogContent,dividers:!0,children:Object(G.jsx)(rt.a,{disablePadding:!0,children:x.map((function(e){return Object(G.jsx)(st,{tokenInfo:e,onClick:function(e){a(e),n()}},e.address)}))})})]})}function st(e){var t=e.tokenInfo,n=e.onClick,r=new k.PublicKey(t.address);return Object(G.jsxs)(at.a,{button:!0,onClick:function(){return n(r)},style:{padding:"10px 20px"},children:[Object(G.jsx)(Zt,{mint:r,style:{height:"30px",borderRadius:"15px",color:"white"}}),Object(G.jsx)(ut,{tokenInfo:t})]})}function ut(e){var t=e.tokenInfo;return Object(G.jsxs)("div",{style:{marginLeft:"16px"},children:[Object(G.jsx)(Ye.a,{style:{fontWeight:"bold",color:"#fff"},children:null===t||void 0===t?void 0:t.symbol}),Object(G.jsx)(Ye.a,{style:{fontSize:"14px",color:"#999"},children:null===t||void 0===t?void 0:t.name})]})}var lt=n(355),dt=n(380),pt=n(367),bt=n(368),ft=n(369),mt=n(381),vt=n(366),jt=n(77),ht=n.n(jt),gt=n(357),xt=n(314),wt=n(358),Ot=n(359),kt=n(360),yt=n(361),St=n(362),At=n(363),Tt=n(375),Ct=n(364),Mt=n(356),Kt=Object(h.a)((function(e){return{table:{},closeAccount:{color:e.palette.error.main}}}));function Pt(e){var t=e.open,n=e.onClose;return Object(G.jsxs)(et.a,{maxWidth:"lg",open:t,onClose:n,PaperProps:{style:{borderRadius:"10px"}},children:[Object(G.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(G.jsx)(lt.a,{onClick:n,style:{padding:10},children:Object(G.jsx)(Mt.a,{})})}),Object(G.jsx)(nt.a,{style:{paddingTop:0},children:Object(G.jsx)(Ft,{})})]})}function Ft(){var e=Kt(),t=Ce(),n=Object(r.useMemo)((function(){return Array.from(t.entries()).map((function(e){var t=Object(v.a)(e,2),n=t[0],r=t[1];return[new k.PublicKey(n),r]}))}),[t]);return Object(G.jsx)(gt.a,{component:xt.a,elevation:0,children:Object(G.jsxs)(wt.a,{className:e.table,"aria-label":"simple table",children:[Object(G.jsx)(Ot.a,{children:Object(G.jsxs)(kt.a,{children:[Object(G.jsx)(yt.a,{children:"Market"}),Object(G.jsx)(yt.a,{align:"center",children:"Open Orders Account"}),Object(G.jsx)(yt.a,{align:"center",children:"Base Used"}),Object(G.jsx)(yt.a,{align:"center",children:"Base Free"}),Object(G.jsx)(yt.a,{align:"center",children:"Quote Used"}),Object(G.jsx)(yt.a,{align:"center",children:"Quote Free"}),Object(G.jsx)(yt.a,{align:"center",children:"Settle"}),Object(G.jsx)(yt.a,{align:"center",children:"Close"})]})}),Object(G.jsx)(St.a,{children:n.map((function(e){var t=Object(v.a)(e,2),n=t[0],r=t[1];return Object(G.jsx)(Et,{market:n,openOrders:r},n.toString())}))})]})})}function Et(e){var t,n,a=e.market,o=e.openOrders,i=Kt(),c=Object(r.useState)(o[0]),s=Object(v.a)(c,2),u=s[0],l=s[1];Object(r.useEffect)((function(){l(o[0])}),[o]);var d=Te(),p=d.swapClient,b=d.closeOpenOrders,j=Me(a),h=Y(),x=we(null===j||void 0===j?void 0:j.baseMintAddress),w=we(null===j||void 0===j?void 0:j.quoteMintAddress),O=xe(null===j||void 0===j?void 0:j.baseMintAddress),k=xe(null===j||void 0===j?void 0:j.quoteMintAddress),y=j?null===(t=h.get(null===j||void 0===j?void 0:j.baseMintAddress.toString()))||void 0===t?void 0:t.symbol:"-",S=j?null===(n=h.get(null===j||void 0===j?void 0:j.quoteMintAddress.toString()))||void 0===n?void 0:n.symbol:"-",A=y&&S?"".concat(y," / ").concat(S):a.toString(),T=u.baseTokenFree.toNumber()+u.quoteTokenFree.toNumber()===0,C=u.baseTokenTotal.toNumber()+u.quoteTokenTotal.toNumber()!==0,M=function(){var e=Object(m.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}throw new Error("Market client not found");case 2:if(O&&k){e.next=4;break}throw new Error("Base or quote wallet not found");case 4:return void 0,e.next=7,j.makeSettleFundsTransaction(p.program.provider.connection,u,O.publicKey,k.publicKey,undefined);case 7:return t=e.sent,n=t.transaction,r=t.signers,e.next=12,p.program.provider.send(n,r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.program.rpc.closeAccount({accounts:{openOrders:u.address,authority:p.program.provider.wallet.publicKey,destination:p.program.provider.wallet.publicKey,market:j.address,dexProgram:E}});case 2:b(u);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(G.jsxs)(kt.a,{children:[Object(G.jsx)(yt.a,{component:"th",scope:"row",children:Object(G.jsx)(Ye.a,{children:Object(G.jsx)(At.a,{href:"https://dex.projectserum.com/#/market/".concat(a.toString()),target:"_blank",rel:"noopener",children:A})})}),Object(G.jsx)(yt.a,{align:"center",children:Object(G.jsx)(Tt.a,{value:u.address.toString(),onChange:function(e){return l(o.filter((function(t){return t.address.toString()===e.target.value}))[0])},children:o.map((function(e){return Object(G.jsx)(Ct.a,{value:e.address.toString(),children:e.address.toString()},e.address.toString())}))})}),Object(G.jsx)(yt.a,{align:"center",children:Nt(x,u.baseTokenTotal.sub(u.baseTokenFree))}),Object(G.jsx)(yt.a,{align:"center",children:Nt(x,u.baseTokenFree)}),Object(G.jsx)(yt.a,{align:"center",children:Nt(w,u.quoteTokenTotal.sub(u.quoteTokenFree))}),Object(G.jsx)(yt.a,{align:"center",children:Nt(w,u.quoteTokenFree)}),Object(G.jsx)(yt.a,{align:"center",children:Object(G.jsx)(g.a,{color:"primary",disabled:T,onClick:M,children:"Settle"})}),Object(G.jsx)(yt.a,{align:"center",children:Object(G.jsx)(g.a,{disabled:C,onClick:K,className:i.closeAccount,children:"Close"})})]},a.toString())}function Nt(e,t){return e?(t.toNumber()/Math.pow(10,e.decimals)).toFixed(e.decimals):t.toNumber().toString()}var It=Object(h.a)((function(e){return{tab:{width:"50%"},table:{},settingsButton:{padding:0,color:e.palette.grey[50]},closeAccountSwitchLabel:{color:e.palette.text.secondary},fairAutoSelected:{backgroundColor:e.palette.primary.main,padding:"3px 5px",borderRadius:"10px",color:e.palette.grey[50],fontWeight:700},fairAuto:{backgroundColor:"dark"===e.palette.type?e.palette.grey[50]:e.palette.grey[100],padding:"3px 5px",borderRadius:"10px",boxShadow:"none"},input:{color:"#ccc !important"}}}));function Rt(){var e=It();return Object(G.jsx)(ht.a,{variant:"popover",children:function(t){return Object(G.jsxs)("div",{children:[Object(G.jsx)(lt.a,Object(H.a)(Object(H.a)({},Object(jt.bindTrigger)(t)),{},{className:e.settingsButton,children:Object(G.jsx)(vt.a,{fontSize:"small"})})),Object(G.jsx)(dt.a,Object(H.a)(Object(H.a)({},Object(jt.bindPopover)(t)),{},{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{style:{borderRadius:"10px",boxShadow:"0px 0px 30px 5px rgba(0,0,0,0.075)"}},children:Object(G.jsx)(Bt,{})}))]})}})}function Bt(){var e=It(),t=Ve(),n=t.slippage,a=t.setSlippage,o=t.fairOverride,i=t.setFairOverride,c=Object(r.useState)(!1),s=Object(v.a)(c,2),u=s[0],l=s[1],d=Qe(),p=Te().swapClient;return Object(G.jsxs)("div",{style:{padding:"15px",width:"305px",background:"#22242a"},children:[Object(G.jsx)(Ye.a,{style:{fontWeight:"bold",color:"white"},children:"Settings"}),Object(G.jsxs)("div",{children:[Object(G.jsxs)("div",{style:{marginTop:"10px"},children:[Object(G.jsx)(Ye.a,{style:{fontSize:"12px",color:"white"},children:"Slippage tolerance"}),Object(G.jsx)(He.a,{type:"number",placeholder:"Error tolerance percentage",value:n,onChange:function(e){return t=parseFloat(e.target.value),void a(!t||t<0?0:t);var t},style:{display:"flex",justifyContent:"center",flexDirection:"column",color:"#fff"},InputProps:{endAdornment:Object(G.jsx)(pt.a,{position:"end",children:"%"}),classes:{input:e.input}}})]}),Object(G.jsxs)("div",{style:{marginTop:"10px"},children:[Object(G.jsx)(Ye.a,{style:{fontSize:"12px",color:"white"},children:"Fair price"}),Object(G.jsxs)("div",{style:{display:"flex"},children:[Object(G.jsx)(He.a,{type:"number",placeholder:"Fair price override",value:d,onChange:function(e){return i(parseFloat(e.target.value))},style:{marginRight:"10px",flex:1,display:"flex",justifyContent:"center",flexDirection:"column"},InputProps:{classes:{input:e.input}},disabled:null===o}),Object(G.jsx)(g.a,{component:"div",variant:"contained",onClick:function(){void 0!==d?i(null===o?d:null):console.error("Fair is undefined")},className:null===o?e.fairAutoSelected:e.fairAuto,children:"Auto"})]})]}),Object(G.jsx)("div",{style:{margin:"10px 0px"},children:Object(G.jsx)(qt,{})}),Object(G.jsx)(g.a,{variant:"contained",fullWidth:!0,style:{color:"#fff"},disabled:null===p.program.provider.wallet.publicKey,onClick:function(){return l(!0)},children:"Manage Dex Accounts"})]}),Object(G.jsx)(Pt,{open:u,onClose:function(){return l(!1)}})]})}function qt(){var e=It(),t=Ve(),n=t.isClosingNewAccounts,r=t.setIsClosingNewAccounts;return Object(G.jsx)(bt.a,{style:{display:"none"},row:!0,children:Object(G.jsx)(ft.a,{classes:{label:e.closeAccountSwitchLabel},labelPlacement:"start",style:{display:"flex",justifyContent:"space-between",marginLeft:0,width:"100%"},control:Object(G.jsx)(mt.a,{checked:n,onChange:function(){return r(!n)},color:"primary"}),label:"Close new accounts"})})}n(370);var zt=Object(h.a)((function(){return{infoLabel:{color:"white !important",marginTop:"20px",marginBottom:"20px",alignItems:"left"},labelWithButton:{display:"flex",justifyContent:"flex-start"},labelText:{fontSize:"12px",width:"150%"},labelValue:{fontSize:"12px",textAlign:"center",width:"20%"},infoButton:{marginLeft:"5px",padding:0,fontSize:"14px"}}}));function Lt(){var e=zt(),t=Ve(),n=t.fromMint,r=t.toMint,a=(we(n),Qe(),Y());a.get(n.toString()),a.get(r.toString());return Object(G.jsxs)("div",{className:e.infoLabel,children:[Object(G.jsxs)("div",{className:e.labelWithButton,children:[Object(G.jsx)(Ye.a,{className:e.labelText,children:"Transaction Settings"}),Object(G.jsx)(Ye.a,{className:e.labelValue,children:Object(G.jsx)(Rt,{})})]}),Object(G.jsxs)("div",{className:e.labelWithButton,children:[Object(G.jsx)(Ye.a,{className:e.labelText,children:"Slippage Tolerance"}),Object(G.jsx)(Ye.a,{className:e.labelValue,children:"0"})]}),Object(G.jsxs)("div",{className:e.labelWithButton,children:[Object(G.jsx)(Ye.a,{className:e.labelText,children:"Minimum Received"}),Object(G.jsx)(Ye.a,{className:e.labelValue,children:"0"})]}),Object(G.jsxs)("div",{className:e.labelWithButton,children:[Object(G.jsx)(Ye.a,{className:e.labelText,children:"Swap Fee"}),Object(G.jsx)(Ye.a,{className:e.labelValue,children:"0"})]})]})}var Dt=Object(h.a)((function(e){return{card:{width:e.spacing(50),borderRadius:e.spacing(2),background:"#22242a",border:"1px solid #aaaaaa36",color:"white !important",boxShadow:"0px 0px 30px 5px rgba(0,0,0,0.075)",padding:e.spacing(2)},tab:{width:"50%"},settingsButton:{padding:0},swapButton:{width:"100%",textTransform:"capitalize",borderRadius:e.spacing(2),backgroundColor:"#323741",color:"white !important",fontSize:16,fontWeight:700,padding:e.spacing(1.5)},swapToFromButton:{display:"block",margin:"5px auto 5px auto",cursor:"pointer"},amountInput:{fontSize:22,fontWeight:600,color:"white !important"},input:{textAlign:"left",color:"white !important"},swapTokenFormContainer:{borderRadius:e.spacing(2),boxShadow:"0px 0px 15px 2px rgba(33,150,243,0.1)",display:"flex",justifyContent:"space-between",background:"#323741",padding:"5px 10px 5px 15px",border:"1px solid #ffffff1c"},swapTokenSelectorContainer:{marginLeft:e.spacing(1),display:"flex",justifyContent:"flex-end",flexDirection:"column",width:"30%"},balanceContainer:{display:"flex",alignItems:"center",padding:"2px 0px",fontSize:"12px",color:"#bebebe"},maxButton:{marginLeft:e.spacing(1),color:e.palette.primary.main,fontWeight:700,fontSize:"12px",cursor:"pointer"},tokenButton:{display:"flex",alignItems:"center",cursor:"pointer",marginBottom:e.spacing(1),border:"1px solid #585858",borderRadius:"20px",background:"#161616"}}}));function Wt(e){var t=e.containerStyle,n=e.contentStyle,r=e.swapTokenContainerStyle,a=Dt();return Object(G.jsx)(Je.a,{className:a.card,style:t,children:Object(G.jsxs)("div",{style:n,children:[Object(G.jsx)(Gt,{style:r}),Object(G.jsx)(Ut,{}),Object(G.jsx)(_t,{style:r}),Object(G.jsx)(Lt,{}),Object(G.jsx)(Xt,{})]})})}function Ut(){var e=Dt(),t=Object(Xe.a)(),n=Ve().swapToFromMints;return Object(G.jsx)($e.a,{className:e.swapToFromButton,fontSize:"medium",htmlColor:t.palette.primary.main,onClick:n})}function Gt(e){var t=e.style,n=Ve(),r=n.fromMint,a=n.setFromMint,o=n.fromAmount,i=n.setFromAmount;return Object(G.jsx)(Vt,{from:!0,style:t,mint:r,setMint:a,amount:o,setAmount:i})}function _t(e){var t=e.style,n=Ve(),r=n.toMint,a=n.setToMint,o=n.toAmount,i=n.setToAmount;return Object(G.jsx)(Vt,{from:!1,style:t,mint:r,setMint:a,amount:o,setAmount:i})}function Vt(e){var t=e.from,n=e.style,a=e.mint,o=e.setMint,i=e.amount,c=e.setAmount,s=Dt(),u=Object(r.useState)(!1),l=Object(v.a)(u,2),d=l[0],p=l[1],b=xe(a),f=we(a),m=b&&f&&b.account.amount.toNumber()/Math.pow(10,f.decimals),j=f&&i?i.toLocaleString("fullwide",{maximumFractionDigits:f.decimals,useGrouping:!1}):i;return Object(G.jsxs)("div",{className:s.swapTokenFormContainer,style:n,children:[Object(G.jsx)(ct,{setMint:o,open:d,onClose:function(){return p(!1)}}),Object(G.jsxs)("div",{children:[Object(G.jsx)(Ye.a,{className:s.balanceContainer,children:t?"From":"To"}),Object(G.jsx)(He.a,{type:"number",value:j,onChange:function(e){return c(parseFloat(e.target.value))},InputProps:{disableUnderline:!0,classes:{root:s.amountInput,input:s.input}}})]}),Object(G.jsxs)("div",{className:s.swapTokenSelectorContainer,children:[Object(G.jsxs)(Ye.a,{className:s.balanceContainer,children:[b&&f?"Balance: ".concat(null===m||void 0===m?void 0:m.toFixed(f.decimals)):"Balance : 0.00",t&&m?Object(G.jsx)("span",{className:s.maxButton,onClick:function(){return c(m)},children:"MAX"}):null]}),Object(G.jsx)(Qt,{mint:a,onClick:function(){return p(!0)}})]})]})}function Qt(e){var t=e.mint,n=e.onClick,r=Dt(),a=Object(Xe.a)();return Object(G.jsxs)("div",{onClick:n,className:r.tokenButton,children:[Object(G.jsx)(Zt,{mint:t,style:{height:a.spacing(3),paddingLeft:a.spacing(1)}}),Object(G.jsx)(Jt,{mint:t,style:{fontSize:14,fontWeight:700}})]})}function Zt(e){var t=e.mint,n=e.style,r=Y().get(t.toString());return Object(G.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column",padding:"5px 5px"},children:(null===r||void 0===r?void 0:r.logoURI)?Object(G.jsx)("img",{alt:"Logo",style:n,src:null===r||void 0===r?void 0:r.logoURI}):Object(G.jsx)("div",{style:n})})}function Jt(e){var t=e.mint,n=e.style,r=Y(),a=Object(Xe.a)(),o=r.get(t.toString());return Object(G.jsx)(Ye.a,{style:Object(H.a)({marginLeft:a.spacing(2),marginRight:a.spacing(1)},n),children:null===o||void 0===o?void 0:o.symbol})}function Xt(){var e=Dt(),t=Ve(),n=t.fromMint,r=t.toMint,a=t.fromAmount,o=t.slippage,i=t.isClosingNewAccounts,c=t.isStrict,s=Te().swapClient,u=we(n),l=we(r),d=Ce(),p=Fe(n,r),b=Me(p&&p.markets?p.markets[0]:void 0),v=Me(p&&p.markets?p.markets[1]:void 0),j=function(){var e,t,n,r,a=Ve(),o=a.fromMint,i=a.toMint,c=a.fromAmount,s=a.toAmount,u=Te().swapClient,l=X(),d=l.wormholeMap,p=l.solletMap,b=xe(o),f=Qe(),m=Fe(o,i);return null!==m&&void 0!==b&&null!==b&&void 0!==f&&f>0&&!1===o.equals(i)&&null!==u.program.provider.wallet.publicKey&&c>0&&s>0&&null!==m&&("wormhole-native"!==m.kind||void 0!==(null===(e=d.get(o.toString()))||void 0===e||null===(t=e.tags)||void 0===t?void 0:t.includes(Q)))&&("wormhole-sollet"!==m.kind||void 0!==(null===(n=p.get(o.toString()))||void 0===n||null===(r=n.tags)||void 0===r?void 0:r.includes(V)))}(),h=function(e){var t=Ve().referral,n=Object(M.a)(Object(m.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return",void 0);case 2:if(e){n.next=4;break}return n.abrupt("return",void 0);case 4:if(e.quoteMintAddress.equals(N)||e.quoteMintAddress.equals(I)){n.next=6;break}return n.abrupt("return",void 0);case 6:return n.abrupt("return",K.Token.getAssociatedTokenAddress(K.ASSOCIATED_TOKEN_PROGRAM_ID,K.TOKEN_PROGRAM_ID,e.quoteMintAddress,t));case 7:case"end":return n.stop()}}),n)}))),[e]);if(n.result)return n.result}(b),x=Qe(),O=xe(n),y=xe(r),S=b&&b.quoteMintAddress,A=we(S),T=xe(S),C=function(){var e=Object(m.a)(f.a.mark((function e(){var t,p,j,g,C,M,K,P,F,E,N,I,B;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&l){e.next=2;break}throw new Error("Unable to calculate mint decimals");case 2:if(x){e.next=4;break}throw new Error("Invalid fair");case 4:if(S&&A){e.next=6;break}throw new Error("Quote mint not found");case 6:return t=new w.BN(a*Math.pow(10,u.decimals)),p=n.equals(R)||r.equals(R),j=p?k.Keypair.generate():void 0,e.next=11,Object(m.a)(f.a.mark((function e(){var a,p,m,g,k;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new Error("Market undefined");case 2:return a={rate:new w.BN(Math.pow(10,l.decimals)*ye/x).muln(100-o).divn(100),fromDecimals:u.decimals,quoteDecimals:A.decimals,strict:c},p=b?d.get(null===b||void 0===b?void 0:b.address.toString()):void 0,m=v?d.get(null===v||void 0===v?void 0:v.address.toString()):void 0,g=n.equals(R)?j.publicKey:O?O.publicKey:void 0,k=r.equals(R)?j.publicKey:y?y.publicKey:void 0,e.next=9,s.swapTxs({fromMint:n,toMint:r,quoteMint:S,amount:t,minExchangeRate:a,referral:h,fromMarket:b,toMarket:v,fromOpenOrders:p?p[0].address:void 0,toOpenOrders:m?m[0].address:void 0,fromWallet:g,toWallet:k,quoteWallet:T?T.publicKey:void 0,close:i});case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))();case 11:if(g=e.sent,!p){e.next=28;break}if(!(g.length>1)){e.next=15;break}throw new Error("SOL must be swapped in a single transaction");case 15:return e.next=17,Yt(s.program.provider,j,n,t);case 17:K=e.sent,P=K.tx,F=K.signers,E=$t(s.program.provider,j),N=E.tx,I=E.signers,(B=new k.Transaction).add(P),B.add(g[0].tx),B.add(N),g[0].tx=B,(C=g[0].signers).push.apply(C,Object(de.a)(F)),(M=g[0].signers).push.apply(M,Object(de.a)(I));case 28:return e.next=30,s.program.provider.sendAll(g);case 30:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(G.jsx)(g.a,{variant:"contained",className:e.swapButton,onClick:C,children:j?"Swap":"Connect Wallet"})}function Yt(e,t,n,r){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(m.a)(f.a.mark((function e(t,n,r,a){var o,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new k.Transaction,i=[n],e.t0=o,e.t1=k.SystemProgram,e.t2=t.wallet.publicKey,e.t3=n.publicKey,e.next=8,K.Token.getMinBalanceRentForExemptAccount(t.connection);case 8:return e.t4=e.sent,e.t5=K.TOKEN_PROGRAM_ID,e.t6={fromPubkey:e.t2,newAccountPubkey:e.t3,lamports:e.t4,space:165,programId:e.t5},e.t7=e.t1.createAccount.call(e.t1,e.t6),e.t0.add.call(e.t0,e.t7),r.equals(R)&&o.add(k.SystemProgram.transfer({fromPubkey:t.wallet.publicKey,toPubkey:n.publicKey,lamports:a.toNumber()})),o.add(K.Token.createInitAccountInstruction(K.TOKEN_PROGRAM_ID,B,n.publicKey,t.wallet.publicKey)),e.abrupt("return",{tx:o,signers:i});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $t(e,t){var n=new k.Transaction;return n.add(K.Token.createCloseAccountInstruction(K.TOKEN_PROGRAM_ID,t.publicKey,e.wallet.publicKey,e.wallet.publicKey,[])),{tx:n,signers:[]}}function en(e){var t=e.containerStyle,n=e.contentStyle,r=e.swapTokenContainerStyle,a=e.materialTheme,o=e.provider,i=e.tokenList,c=e.fromMint,s=e.toMint,u=e.fromAmount,l=e.toAmount,d=e.referral,p=new S.Swap(o,i),b=Object(A.a)(a||{palette:{primary:{main:"#2196F3",contrastText:"#FFFFFF"},secondary:{main:"#E0E0E0",light:"#595959"},error:{main:"#ff6b6b"}}});return Object(G.jsx)(T.a,{theme:b,children:Object(G.jsx)(J,{tokenList:i,children:Object(G.jsx)(he,{provider:o,children:Object(G.jsx)(Ae,{swapClient:p,children:Object(G.jsx)(_e,{fromMint:c,toMint:s,fromAmount:u,toAmount:l,referral:d,children:Object(G.jsx)(Wt,{containerStyle:t,contentStyle:n,swapTokenContainerStyle:r})})})})})})}n(311);var tn=n(221);var nn=Object(h.a)((function(e){return{root:{minHeight:"100vh",paddingLeft:e.spacing(1),paddingRight:e.spacing(1),background:"#101535"}}}));function rn(){var e=nn(),t=Object(j.b)().enqueueSnackbar,n=Object(r.useState)(!1),a=Object(v.a)(n,2),o=a[0],i=a[1],c=Object(r.useState)(null),s=Object(v.a)(c,2),u=s[0],l=s[1],d=Object(r.useMemo)((function(){var e={preflightCommitment:"recent",commitment:"recent"},n="https://solana-api.projectserum.com",r=new O.a("https://www.sollet.io",n),a=new k.Connection(n,e.preflightCommitment);return[new an(a,r,e,(function(e,n){n?t("Error: ".concat(n.toString()),{variant:"error"}):t("Transaction sent",{variant:"success",action:Object(G.jsx)(g.a,{color:"inherit",component:"a",target:"_blank",rel:"noopener",href:"https://explorer.solana.com/tx/".concat(e),children:"View on Solana Explorer"})})})),r]}),[t]),p=Object(v.a)(d,2),b=p[0],h=p[1];function w(){return(w=Object(m.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://raw.githubusercontent.com/von-dee/swaptzstats/main/tezos.tokenlist.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){(new y.a).resolve().then(l)}),[l]),Object(r.useEffect)((function(){console.log("getToken"),console.log(function(){return w.apply(this,arguments)}()),h.on("connect",(function(){t("Wallet connected",{variant:"success"}),i(!0)})),h.on("disconnect",(function(){t("Wallet disconnected",{variant:"info"}),i(!1)}))}),[h,t]),Object(r.useEffect)((function(){console.log("Token Lists"),console.log(tn),console.log(u)}),[u]),Object(G.jsxs)(x.a,{container:!0,justify:"center",alignItems:"center",className:e.root,children:[Object(G.jsx)(g.a,{variant:"outlined",onClick:function(){return o?h.disconnect():h.connect()},style:{position:"fixed",color:"white",right:24,top:24},children:o?"Disconnect":"Connect"}),u&&Object(G.jsx)(en,{provider:b,tokenList:u})]})}var an=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(e,r,a,o){var i;Object(c.a)(this,n);var s=r;return(i=t.call(this,e,s,a)).onTransaction=void 0,i.onTransaction=o,i}return Object(s.a)(n,[{key:"send",value:function(){var e=Object(m.a)(f.a.mark((function e(t,r,a){var o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)(Object(l.a)(n.prototype),"send",this).call(this,t,r,a);case 3:return o=e.sent,this.onTransaction(o),e.abrupt("return",o);case 8:return e.prev=8,e.t0=e.catch(0),(e.t0 instanceof Error||void 0===e.t0)&&this.onTransaction(void 0,e.t0),e.abrupt("return","");case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"sendAll",value:function(){var e=Object(m.a)(f.a.mark((function e(t,r){var a,o=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(u.a)(Object(l.a)(n.prototype),"sendAll",this).call(this,t,r);case 3:return(a=e.sent).forEach((function(e){o.onTransaction(e)})),e.abrupt("return",a);case 8:return e.prev=8,e.t0=e.catch(0),(e.t0 instanceof Error||void 0===e.t0)&&this.onTransaction(void 0,e.t0),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(w.Provider),on=function(){return Object(G.jsx)(j.a,{maxSnack:5,autoHideDuration:8e3,children:Object(G.jsx)(rn,{})})},cn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,383)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};i.a.render(Object(G.jsx)(a.a.StrictMode,{children:Object(G.jsx)(on,{})}),document.getElementById("root")),cn()}},[[312,1,2]]]);
//# sourceMappingURL=main.0bb516e6.chunk.js.map